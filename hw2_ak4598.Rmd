---
title: "HW2 by AK4598"
author: "Aleya Khalifa"
date: "`r Sys.Date()`"
output: github_document
---

```{r setup, include=FALSE}
library(tidyverse)

```

This is an R Markdown file, rendered to github, that describes the process for problems 1-3. The data used in each problem has already been loaded into the project directory in the folder `data`.

# Problem 1

This problem uses FiveThiryEight data. We’ll use the data in pols-month.csv, unemployment.csv, and snp.csv. Our goal is to merge these into a single data frame using year and month as keys across datasets.

```{r}
pols <- read_csv(file = "data/fivethirtyeight_datasets/pols-month.csv")

unemployment <- read_csv(file = "data/fivethirtyeight_datasets/unemployment.csv")

snp <- read_csv(file = "data/fivethirtyeight_datasets/snp.csv")
```

## Problem 1.1

Clean the data in `pols-month.csv`. Use separate() to break up the variable `mon` into integer variables `year`, `month`, and `day`; replace month number with month name; create a `president` variable taking values `gop` and `dem`, and remove `prez_dem` and `prez_gop`; and remove the `day` variable.

```{r}
pols <- pols %>% 
  separate(mon, into = c("year", "mon", "day"), sep = "-", convert = TRUE) %>%
  mutate(mon = month.abb[mon],
         president = ifelse(prez_dem>0,"dem",
                            ifelse(prez_gop>0,"gop",
                                   NA))) %>%
  select(-prez_dem, -prez_gop, -day)
```

## Problem 1.2

Second, clean the data in `snp.csv` using a similar process to the above. For consistency across datasets, arrange according to year and month, and organize so that year and month are the leading columns.

```{r}
snp <- snp %>%
  separate(date, into = c("mon", "day", "year"), sep = "/", convert = TRUE) %>% 
  mutate(mon = month.abb[mon],
         year = as.integer(ifelse(year<16,year+2000,year+1900))) %>%
  arrange(year, mon) %>%
  relocate(year, mon) %>%
  select(-day)
```


## Problem 1.3

Third, tidy the `unemployment` data so that it can be merged with the previous datasets. This process will involve switching from “wide” to “long” format; ensuring that key variables have the same name; and ensuring that key variables take the same values.

```{r}
unemployment <- unemployment %>%
  pivot_longer(Jan:Dec,
               names_to = "mon",
               values_to = "unemployment") %>%
  mutate(Year = as.integer(Year)) %>%
  janitor::clean_names()
```


## Problem 1.4

Join the datasets by merging `snp` into `pols`, and merging `unemployment` into the result.

```{r}
pols_data <- pols %>%
  left_join(snp, by = c("year", "mon")) %>%
  left_join(unemployment, by = c("year", "mon"))
```


In this problem, we took three datasets and created one long-format dataset organized by month and year. 

The original `pols` dataset had `r nrow(read_csv(file = "data/fivethirtyeight_datasets/pols-month.csv"))` observations (rows) and `r length(read_csv(file = "data/fivethirtyeight_datasets/pols-month.csv"))` variables (columns). We split the date variable into `mon` and `year` to arrange the dataset. We also created the `president` variable to reflect whether the president was republican or democrat.

The original `snp` dataset had `r nrow(read_csv(file = "data/fivethirtyeight_datasets/snp.csv"))` observations (rows) and `r length(read_csv(file = "data/fivethirtyeight_datasets/snp.csv"))` variables (columns). We again split the date variable into `mon` and `year` to arrange the dataset.

The original `unemployment` dataset had `r nrow(read_csv(file = "data/fivethirtyeight_datasets/unemployment.csv"))` observations (rows) and `r length(read_csv(file = "data/fivethirtyeight_datasets/unemployment.csv"))` variables (columns). We reorganized this dataset from wide format to long format so that months were in one column instead of spread across columns - now the `mon` variable to match the other datasets.

The `snp` and `unemployment` datasets were merged into the `pols` dataset to create the `pols_data` dataset. This final dataset includes the `close` variable and the `unemployment` variable, matched to the month-year.



# Problem 2
This problem uses Mr. Trash Wheel data.
```{r}

```


# Problem 3
This problem uses Alzeihmer's disease (AD) biomarker data from the MCI dataset.
```{r}

```

